language: scala
sudo: false
cache:
  directories:
    - $HOME/.ivy2

# There's no nicer way to specify this matrix; see
# https://github.com/travis-ci/travis-ci/issues/1519.
# Spark 1.5.0 only supports Java 7+.
matrix:
  include:
    # We only test Spark 1.4.1 with Hadooop 2.2.0 because
    # https://github.com/apache/spark/pull/6599 is not present in 1.4.1,
    # so the published Spark Maven artifacts will not work with Hadoop 1.x.
    #- jdk: openjdk6
    #  scala: 2.10.5
    #  env: HADOOP_VERSION="2.2.0" SPARK_VERSION="1.4.1"
    #- jdk: openjdk7
    #  scala: 2.10.5
    #  env: HADOOP_VERSION="1.0.4" SPARK_VERSION="1.5.0"
    
    #- jdk: openjdk7
    #  scala: 2.10.5
    #  env: HADOOP_VERSION="1.2.1" SPARK_VERSION="1.5.0"
    #- jdk: openjdk7
    #  scala: 2.10.5
    #  env: HADOOP_VERSION="2.2.0" SPARK_VERSION="1.5.0"
    ## Scala 2.11 tests:
    #- jdk: openjdk7
    #  scala: 2.11.7
    #  env: HADOOP_VERSION="2.2.0" SPARK_VERSION="1.5.0"
    #- jdk: openjdk7
    #  scala: 2.11.7
    #  env: HADOOP_VERSION="2.2.0" SPARK_VERSION="1.6.2" 
    - jdk: openjdk7
      scala: 2.11.7
      env: HADOOP_VERSION="2.2.0" SPARK_VERSION="1.6.2" INTEGRATION_TESTS="true"

env:
  global:
    # IT_SNOWFLAKE_CONF_CONTENT
    - secure: "KhZp9SNZNMIt3eDiBaHGyH5tlkAYZSYZ0w/xysfBRqREKHccgyESX17IydtFggArDFymZAlUCxwAncsF53fHFB4TmoLARtOAO9eJVQyX7n2qMsNTrKy0bzMsVzRjRNXQM/9R1f247mood2OeF9A3gdkbPqxaqKrv2NZFbj6yFGJ2/md412EvYGv0+r640khJ52yWX7YZryliK8bIbGCQ2mT0YsheALEVzhFFpkPlWvWGatdmX5VF+Grr0QhmzsAhW6jvQezxLrwjvISe4S8XVEzckoOSFoF7zAfY1IZpqmyzkpU+FxB/oncLW16KPxBuMBgg+rQLqPdNaF9z72RviNRea7thtbE/stJqgP9bo+pjKkIS1wDUc05KGy9iP8Ljfw3x2IZA6jvQMpdCSq0FhBhp/u+Bzh6KxnlkK88bVFX38pVwcgvUHB0f/xPOurMq63dFatEyOG2E4buptR+d+UC01p1cOtQehuj+NGzW4ocJ0t+HIWZm5kIjKHJBxeOPvGM17CUeHxZ+ubGro5HXX+niXYZqTXGFBqmHM3Pa2wx87OQEMzPHmx7pb4AFuGV58G/L+dW7IXPIM7dWfEcPB7KMrBEiNqrES8k/A0AAdXu86zEeKeFuxIB7iQ9UB7DxOiPlQHJ0a2+hBh0n8xiNbrpnEgcNvGkl9GwC8q/dYgM="
    # SF_SCHEMA
    - secure: "YkwYWZPl8y/43kB/3cFidIJJZznB0u061wB1ZwrtUCnSzpPPsDI5ygiwQUhE791xVZXB+W7c+B+YYYD6QP5zfGz62MKlY+fSoad6pX+89x2dfY6TIsJYTQLQqVzCEgtIymn7bvWjIanGQc8Dpo9E0RIZ4ADiyw6iwQDRIv49t3tCys9d3uJkwVyLgpG3PfIEjtPlVTCMs8HSHmuHeAp54pa5umzp7uF7QxzzseGdK0T4zI4802cDZWUE9pdxEaELMni1oFtriWDusigVgZJbIRcRYTy2VdAX278NAEPahPrKbqZKsN7v+QV7B53xZYu5BfmBrECPzKvjI/4/V495rD1i3w61u4SD/+TiJYT/GswaRFJ/PSbfR8Xiatws5ztK4p4Kcyu9+pIt0dvJ4grGtoD8G3Vmo8ZGjzYP1jiy6bTatIPDsJSDQdUTDs4BXtbltWenMU9V9Iil+MeIjJzS0si9DkuKAkk/oMujRZvjCbZVVhA170fEajF0DAVFJ9o03iEQ2Du3KvbIiS+BHiL72ba9jtsIqnUa1DkRjRm8OAewmjrbFSnS/aO5mKVpmnJwDKaC7K8tJRi0hPDt+oOC0Tk1RjvGDTSPh4fRSbBHroDOW4GR04sgA+CmE9ZsRbgRJevhWld5I+0sayzCxhsbqdQS9nUr5A5bXAm0uyVpCAQ="

script:
#  - if [ "$INTEGRATION_TESTS" != "true" ] ; then sbt -Dhadoop.testVersion=$HADOOP_VERSION -Dspark.testVersion=$SPARK_VERSION ++$TRAVIS_SCALA_VERSION coverage test ; fi
#  - if [ "$TRAVIS_SECURE_ENV_VARS" == "true" -a "$INTEGRATION_TESTS" == "true" ]; then sbt -Dhadoop.version=$HADOOP_VERSION -Dspark.version=$SPARK_VERSION ++$TRAVIS_SCALA_VERSION coverage it:test ; fi
   - echo $IT_SNOWFLAKE_CONF_CONTENT; echo -e $IT_SNOWFLAKE_CONF_CONTENT
   - if [ "$TRAVIS_SECURE_ENV_VARS" == "true" ]; then echo $IT_SNOWFLAKE_CONF_CONTENT; echo -e $IT_SNOWFLAKE_CONF_CONTENT; echo Hello; echo $SF_SCHEMA; fi
#  - sbt ++$TRAVIS_SCALA_VERSION scalastyle
#  - sbt ++$TRAVIS_SCALA_VERSION "test:scalastyle"
#  - sbt ++$TRAVIS_SCALA_VERSION  "it:scalastyle"

after_success:
  - bash <(curl -s https://codecov.io/bash)
